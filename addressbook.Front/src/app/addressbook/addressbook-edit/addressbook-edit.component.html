<div class="modal-overlay" (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ entry?.id ? 'Edit Entry' : 'Add New Entry' }}</h2>
      <button class="close-btn" (click)="onClose()">&times;</button>
    </div>

    <form [formGroup]="editForm" (ngSubmit)="onSubmit()" class="modal-body">
      <div class="form-grid">
        <div class="form-group">
          <label>Full Name *</label>
          <input type="text" formControlName="fullName" />
          <div class="error-message" *ngIf="editForm.get('fullName')?.invalid && editForm.get('fullName')?.touched">
            Full name is required
          </div>
        </div>

        <div class="form-group">
          <label>Job Title *</label>
          <select formControlName="jobId">
            <option value="">Select Job Title</option>
            <option *ngFor="let job of jobs" [value]="job.id">{{ job.jobTitle }}</option>
          </select>
          <div class="error-message" *ngIf="editForm.get('jobId')?.invalid && editForm.get('jobId')?.touched">
            Job title is required
          </div>
        </div>

        <div class="form-group">
          <label>Department *</label>
          <select formControlName="departmentId">
            <option value="">Select Department</option>
            <option *ngFor="let dept of departments" [value]="dept.id">{{ dept.name }}</option>
          </select>
          <div class="error-message" *ngIf="editForm.get('departmentId')?.invalid && editForm.get('departmentId')?.touched">
            Department is required
          </div>
        </div>

        <div class="form-group">
          <label>Mobile Number *</label>
          <input type="text" formControlName="mobileNumber" />
          <div class="error-message" *ngIf="editForm.get('mobileNumber')?.invalid && editForm.get('mobileNumber')?.touched">
            <span *ngIf="editForm.get('mobileNumber')?.errors?.['required']">Mobile number is required</span>
            <span *ngIf="editForm.get('mobileNumber')?.errors?.['invalidPhone']">Invalid phone number format</span>
          </div>
        </div>

        <div class="form-group">
          <label>Date of Birth *</label>
          <input type="date" formControlName="dateOfBirth" />
          <div class="error-message" *ngIf="editForm.get('dateOfBirth')?.invalid && editForm.get('dateOfBirth')?.touched">
            Date of birth is required
          </div>
        </div>

        <div class="form-group">
          <label>Age *</label>
          <input type="number" formControlName="age" min="1" max="150" />
          <div class="error-message" *ngIf="editForm.get('age')?.invalid && editForm.get('age')?.touched">
            Valid age is required
          </div>
        </div>

        <div class="form-group full-width">
          <label>Address *</label>
          <textarea formControlName="address" rows="3"></textarea>
          <div class="error-message" *ngIf="editForm.get('address')?.invalid && editForm.get('address')?.touched">
            Address is required
          </div>
        </div>

        <div class="form-group full-width">
          <label>Email *</label>
          <input type="email" formControlName="email" />
          <div class="error-message" *ngIf="editForm.get('email')?.invalid && editForm.get('email')?.touched">
            <span *ngIf="editForm.get('email')?.errors?.['required']">Email is required</span>
            <span *ngIf="editForm.get('email')?.errors?.['invalidEmail']">Invalid email format</span>
          </div>
        </div>

        <div class="form-group full-width">
          <label>Photo</label>
          <div class="photo-upload">
            <input type="file" accept="image/*" (change)="onFileSelected($event)" />
            <div class="photo-preview" *ngIf="photoPreview">
              <img [src]="photoPreview" alt="Preview" />
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="onClose()">Cancel</button>
        <button type="submit" class="btn btn-primary" [disabled]="editForm.invalid || isLoading">
          <span *ngIf="!isLoading">{{ entry?.id ? 'Update' : 'Save' }}</span>
          <span *ngIf="isLoading">Saving...</span>
        </button>
      </div>
    </form>
  </div>
</div>

